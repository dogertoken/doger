<style>
  #status {
    font-size: 18px;
    font-weight: bold;
    margin-top: 10px;
    color: #ffffff;
    background-color: #222;
    padding: 10px;
    border-radius: 5px;
    display: inline-block;
}

#checkinButton:disabled {
    background-color: gray;
    cursor: not-allowed;
}
</style>

<p id="countdown">Loading next claim time...</p>

<script>
  async function updateCountdown() {
    if (contract && userAccount) {
        try {
            const lastCheckIn = await contract.methods._lastCheckIn(userAccount).call();
            const currentTime = Math.floor(Date.now() / 1000);
            const nextCheckInTime = Number(lastCheckIn) + 86400;
            
            if (currentTime < nextCheckInTime) {
                const timeLeft = nextCheckInTime - currentTime;
                const hours = Math.floor(timeLeft / 3600);
                const minutes = Math.floor((timeLeft % 3600) / 60);
                const seconds = timeLeft % 60;
                
                document.getElementById("status").innerText = `Next claim in: ${hours}h ${minutes}m ${seconds}s`;
                document.getElementById("checkinButton").disabled = true;
            } else {
                document.getElementById("status").innerText = "You can claim now!";
                document.getElementById("checkinButton").disabled = false;
            }
        } catch (error) {
            console.error("Error checking next claim time:", error);
            document.getElementById("status").innerText = "Error checking next claim time.";
        }
    }
}

// Update countdown setiap detik
setInterval(updateCountdown, 1000);
</script>
